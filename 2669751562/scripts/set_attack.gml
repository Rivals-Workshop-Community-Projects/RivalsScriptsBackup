//update

if (attack == AT_USPECIAL && !free) {
    attack = AT_USPECIAL_GROUND;
}

if (attack == AT_FSPECIAL && free) {
    attack = AT_FSPECIAL_AIR;
}