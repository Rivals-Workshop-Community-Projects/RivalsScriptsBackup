shader_start();
if sagemode != 0 && sagemode <= 5 && (!attacking or (attacking && attack != AT_USPECIAL) or (attacking && attack == AT_USPECIAL && window != 2 && window != 3))  {
    draw_sprite_ext(sprite_get("sagefx1"),  get_gameplay_time() / 4 + 1, sagefx1 + 15 - random_func(1,2,true), sagefy1 - 1 + random_func(6,2,true), 1, 1, 0, -1, 1)
    if sagemode >= 2 {
    draw_sprite_ext(sprite_get("sagefx1"),  get_gameplay_time() / 4 + 2, sagefx2 - 15 + random_func(2,2,true), sagefy2 - 1 + random_func(7,2,true), 1, 1, 0, -1, 1)
    if sagemode >= 3 {
    draw_sprite_ext(sprite_get("sagefx1"),  get_gameplay_time() / 4 + 3, sagefx3 + 21 - random_func(3,2,true), sagefy3 - 30 - 1 + random_func(8,2,true), 1, 1, 0, -1, 1)
    if sagemode >= 4 {
        draw_sprite_ext(sprite_get("sagefx1"),  get_gameplay_time() / 4 + 4, sagefx4 - 21 + random_func(4,2,true), sagefy4 - 30 - 1 + random_func(9,2,true), 1, 1, 0, -1, 1)
    if sagemode >= 5 {
        draw_sprite_ext(sprite_get("sagefx1"),  get_gameplay_time() / 4 + 5, sagefx5 - 1 + random_func(5,2,true) , sagefy5 - 54 - 1 + random_func(10,2,true), 1, 1, 0, -1, 1)
}
    
}
        
}

}

}


if get_player_color(player) == 13 {
if sagemode == 6 && (!attacking or (attacking && attack != AT_USPECIAL) or (attacking && attack == AT_USPECIAL && window != 2 && window != 3))  {
    draw_sprite_ext(sprite_get("berryball3"),  get_gameplay_time() / 4 + 1, sagefx1 + 15 - random_func(1,2,true), sagefy1 - 1 + random_func(6,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("berryball3"),  get_gameplay_time() / 4 + 2, sagefx2 - 15 + random_func(2,2,true), sagefy2 - 1 + random_func(7,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("berryball3"),  get_gameplay_time() / 4 + 3, sagefx3 + 21 - random_func(3,2,true), sagefy3 - 30 - 1 + random_func(8,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("berryball3"),  get_gameplay_time() / 4 + 4, sagefx4 - 21 + random_func(4,2,true), sagefy4 - 30 - 1 + random_func(9,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("berryball3"),  get_gameplay_time() / 4 + 5, sagefx5 - 1 + random_func(5,2,true) , sagefy5 - 54 - 1 + random_func(10,2,true), 1, 1, 0, -1, 0.6)
}
    
}
        
}

}

}

}

if get_player_color(player) == 20 {
if sagemode == 6 && (!attacking or (attacking && attack != AT_USPECIAL) or (attacking && attack == AT_USPECIAL && window != 2 && window != 3))  {
    draw_sprite_ext(sprite_get("dinonug2"),  get_gameplay_time() / 4 + 1, sagefx1 + 15 - random_func(1,2,true), sagefy1 - 1 + random_func(6,2,true), 1, 1, 0 + get_gameplay_time(), -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("dinonug2"),  get_gameplay_time() / 4 + 2, sagefx2 - 15 + random_func(2,2,true), sagefy2 - 1 + random_func(7,2,true), 1, 1, 60 + get_gameplay_time(), -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("dinonug2"),  get_gameplay_time() / 4 + 3, sagefx3 + 21 - random_func(3,2,true), sagefy3 - 30 - 1 + random_func(8,2,true), 1, 1, 120 + get_gameplay_time(), -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("dinonug2"),  get_gameplay_time() / 4 + 4, sagefx4 - 21 + random_func(4,2,true), sagefy4 - 30 - 1 + random_func(9,2,true), 1, 1, 180 + get_gameplay_time(), -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("dinonug2"),  get_gameplay_time() / 4 + 5, sagefx5 - 1 + random_func(5,2,true) , sagefy5 - 54 - 1 + random_func(10,2,true), 1, 1, 240 + get_gameplay_time(), -1, 0.6)
}
    
}
        
}

}

}

}

if get_player_color(player) == 21 {
if sagemode == 6 && (!attacking or (attacking && attack != AT_USPECIAL) or (attacking && attack == AT_USPECIAL && window != 2 && window != 3))  {
    draw_sprite_ext(sprite_get("wisp2"),  get_gameplay_time() / 4 + 1, sagefx1 + 15 - random_func(1,2,true), sagefy1 - 1 + random_func(6,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("wisp2"),  get_gameplay_time() / 4 + 2, sagefx2 - 15 + random_func(2,2,true), sagefy2 - 1 + random_func(7,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
    draw_sprite_ext(sprite_get("wisp2"),  get_gameplay_time() / 4 + 3, sagefx3 + 21 - random_func(3,2,true), sagefy3 - 30 - 1 + random_func(8,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("wisp2"),  get_gameplay_time() / 4 + 4, sagefx4 - 21 + random_func(4,2,true), sagefy4 - 30 - 1 + random_func(9,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6 {
        draw_sprite_ext(sprite_get("wisp2"),  get_gameplay_time() / 4 + 5, sagefx5 - 1 + random_func(5,2,true) , sagefy5 - 54 - 1 + random_func(10,2,true), 1, 1, 0, -1, 0.6)
}
    
}
        
}

}

}

}
if get_player_color(player) != 13 && get_player_color(player) != 20  && get_player_color(player) != 21 {
if sagemode == 6  && (!attacking or (attacking && attack != AT_USPECIAL) or (attacking && attack == AT_USPECIAL && window != 2 && window != 3))  {
    draw_sprite_ext(sprite_get("ball3"),  get_gameplay_time() / 4 + 1, sagefx1 + 15 - random_func(1,2,true), sagefy1 - 1 + random_func(6,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6  {
    draw_sprite_ext(sprite_get("ball3"),  get_gameplay_time() / 4 + 2, sagefx2 - 15 + random_func(2,2,true), sagefy2 - 1 + random_func(7,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6  {
    draw_sprite_ext(sprite_get("ball3"),  get_gameplay_time() / 4 + 3, sagefx3 + 21 - random_func(3,2,true), sagefy3 - 30 - 1 + random_func(8,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6  {
        draw_sprite_ext(sprite_get("ball3"),  get_gameplay_time() / 4 + 4, sagefx4 - 21 + random_func(4,2,true), sagefy4 - 30 - 1 + random_func(9,2,true), 1, 1, 0, -1, 0.6)
    if sagemode == 6  {
        draw_sprite_ext(sprite_get("ball3"),  get_gameplay_time() / 4 + 5, sagefx5 - 1 + random_func(5,2,true) , sagefy5 - 54 - 1 + random_func(10,2,true), 1, 1, 0, -1, 0.6)
}
    
}
        
}

}

}

}

if state == PS_AIR_DODGE {
    if state_timer % 4 <= 1 {
        draw_sprite_ext(sprite_index, image_index, x, y, spr_dir, 1, 0, -1, 0.6)
            draw_sprite_ext(sprite_index, image_index, x - shsp*3, y - svsp*3, spr_dir, 1, 0, -1, 0.2)
    }
    
  if state_timer % 4 > 1 {
            draw_sprite_ext(sprite_index, image_index, x - shsp*2, y - svsp*2, spr_dir, 1, 0, -1, 0.6)
    }
}

if attacking && attack == AT_USPECIAL && window == 3 && get_gameplay_time() % 2 == 0 && window_timer < 12{
      gpu_set_blendmode(bm_add);
    draw_sprite_ext(sprite_index, image_index, x - shsp*2 - 2 + random_func(1,4,true), y - svsp*2 - 2 + random_func(2,4,true), spr_dir*1.05, 1.05, 0, -1, 0.8)
      gpu_set_blendmode(bm_normal);
}


if attacking && attack == AT_FSPECIAL && window == 2 && get_gameplay_time() % 2 == 0 && window_timer < 6{
      gpu_set_blendmode(bm_add);
    draw_sprite_ext(sprite_index, image_index, x - shsp*2 - 2 + random_func(1,4,true), y - svsp*2 - 2 + random_func(2,4,true), spr_dir*1.05, 1.05, 0, -1, 0.8)
      gpu_set_blendmode(bm_normal);
}
shader_end() 

if move_cooldown[AT_NSPECIAL_2] > 80 {
    shader_start();    
    	draw_set_alpha((move_cooldown[AT_NSPECIAL_2] - 80)/20);
        draw_rectangle_color(0,0,room_width,room_height,0,0,0,0,false)
    	draw_set_alpha(1);
    	
     draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(1,40,true),room_height/2 - 20 + random_func(2,40,true),
     1,
     1,0,-1, (move_cooldown[AT_NSPECIAL_2] - 80)/20 - 0.5 )

         
    draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(3,40,true),room_height/2 - 20 + random_func(4,40,true),
    (80 - move_cooldown[AT_NSPECIAL_2])/10,
    (80 - move_cooldown[AT_NSPECIAL_2])/10,move_cooldown[AT_NSPECIAL_2]*4 ,-1, (move_cooldown[AT_NSPECIAL_2] - 80)/10 - 0.4)	
    	
    	    draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(3,40,true),room_height/2 - 20 + random_func(4,40,true),
    (80 - move_cooldown[AT_NSPECIAL_2])/16,
    (80 - move_cooldown[AT_NSPECIAL_2])/16,move_cooldown[AT_NSPECIAL_2]*-8,-1, (move_cooldown[AT_NSPECIAL_2] - 80)/10 - 0.4)
    
        
        draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(3,40,true),room_height/2 - 20 + random_func(4,40,true),
    (80 - move_cooldown[AT_NSPECIAL_2])/30,
    (80 - move_cooldown[AT_NSPECIAL_2])/30,0 ,-1, (move_cooldown[AT_NSPECIAL_2] - 80)/10 - 0.6)	
    	
    	    draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(3,40,true),room_height/2 - 20 + random_func(4,40,true),
    (80 - move_cooldown[AT_NSPECIAL_2])/20,
    (80 - move_cooldown[AT_NSPECIAL_2])/20,0,-1, (move_cooldown[AT_NSPECIAL_2] - 80)/10 - 0.6)    
        	    
     draw_sprite_ext(sprite_get("galaxy"),0,room_width/2 - 20 + random_func(1,40,true),room_height/2 - 20 + random_func(2,40,true),
     1,
     1,0,-1, 0.1 )
   shader_end()  
    	


shader_start();      
    draw_sprite_ext(sprite_index, image_index, 
    x - (x - room_width/2)/4 - 10 + random_func(3,20,true), 
    y - (room_height/2 - y)/4 - 10 + random_func(4,20,true), 
    spr_dir*2, 2, 0, -1, (move_cooldown[AT_NSPECIAL_2] - 80)/20 )
shader_end();

    with hit_player_obj shader_start();    
      	draw_sprite_ext(hit_player_obj.sprite_index, hit_player_obj.image_index,  
      	x - (x - room_width/2)/3 - farx*2 - 10 + random_func(1,20,true)
      	,y - (room_height/2 - y)/4 - fary*2 - 10 + random_func(2,20,true)
      	, (hit_player_obj.small_sprites+1) * 2 * hit_player_obj.spr_dir, hit_player_obj.small_sprites+1 * 2, 0 , -1 , (move_cooldown[AT_NSPECIAL_2] - 80)/40);
     
     
      with hit_player_obj shader_end();

}


if get_player_color(player) == 12 && move_cooldown[AT_NSPECIAL_2] < 80 {
		if visible && state != PS_PRATFALL && state != PS_PRATLAND {
    
  gpu_set_blendmode(bm_add);
        draw_sprite_ext(sprite_index, image_index , x - 1 - hsp  , y - 1 - vsp  , spr_dir, 1, 0 , c_aqua , 0.2);
		draw_sprite_ext(sprite_index, image_index , x + 1 - hsp*2  , y + 1 - vsp*2  , spr_dir, 1, 0 , c_fuchsia , 0.2);

  gpu_set_blendmode(bm_normal);
}
}

     
   