//                              ARTICLE  STUFF                                //

// sprite and mask indexes; + default article variables
sprite_index = sprite_get(player_id.is_ea ? "drone_ea" : "drone");
mask_index = asset_get("drone_mask");
can_be_grounded = false;
ignores_walls = false;
spr_dir = player_id.spr_dir;
uses_shader = true;

// State machine variables
state = 0;
state_timer = 0;
should_die = false; //if the article should be despawned

is_default = player_id.is_default;
is_ea = player_id.is_ea;

throw_dir = 0; // default

max_lifetime = 600;
lifetime_decay_step = 5; // applied per frame while grappled, in addition to the standard lifetime progress
lifetime_decayed = 0;
last_decay_frame = get_gameplay_time(); // ensures only one decay step per frame

enemy_hittable = true;

// DSpec functionality
is_primed = false;
trigger_w = 40;
trigger_h = 20;
hitstun_triggered = false;

// Grapple compat
agent_p_grapplable = 2;     // constant: denotes grabbability by grappling hook. 
                            // (2 is a special value denoting the drone, use 1 or true for article compat)
agent_p_pull_vel = 0.5;     // constant: how much grappling should move the article by (set to 0 to disable)
agent_p_hsp = 0;            // last hsp value generated by grapple pull
agent_p_vsp = 0;            // last vsp value generated by grapple pull
agent_p_grappling = false;  // set to true each frame grapple is applied.
                            // (should be set to false at the end of article update.)
agent_p_grapple_dir = 0;    // pull direction for ongoing grapple. used for visual updates.

// Visual
hud_offset = 40;
primed_hud_offset = 90;

vis_warn_phase = -1; // for dspec warn
vis_warn_timer = 0;
vis_warn_y_offset = 0;

// Bash/parry management
unbashable = false;
orig_player = player; // because ori is a thief >:(
reflected_player_id = noone;
reflect_dir = 0;

// Abyss rune support
rune_can_hit_self = false; // Rune K
rune_recall_angle = 0;     // Rune N
rune_recall_speed = 24;    // Rune N, constant


// Supersonic Hit Detection Template
 
//make hbox_group array (the old version was really bad because the array actually affected all players no matter what lol)
hbox_group = array_create(4,0);
var i1 = 0;
var i2 = 0;
repeat(4) {
    hbox_group[@i1] = array_create(50,0);
    repeat(50) {
        hbox_group[@i1][@i2] = array_create(10,0);
        i2++;
    }
    i2 = 0;
    i1++;
}
 
hitstun = 0;
hitstun_full = 0;
 
kb_adj = 1;
kb_dir = 0;
orig_knock = 0;
 
hit_lockout = 0;
 
article_should_lockout = true; //set to false if you don't want hit lockout.
 